<!--
// +----------------------------------------------------------------------
// | form-rules
// +----------------------------------------------------------------------
// | Author: 470211273@qq.com
// +----------------------------------------------------------------------
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>屏蔽特殊字符和空格</title>
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1 style="font-size: 18px;">屏蔽特殊字符和空格</h1>
        <div class="row">
            <div class="col-md-2" style="line-height: 34px;">禁止特殊符号：</div>
            <div class="col-md-4"><input type="text" class="form-control"></div>
        </div>
    </div>
<script type="text/javascript" src="assets/js/jquery1.11.3.min.js"></script>
<script>

    $(function () {
        /**
         * 屏蔽输入框特殊字符输入
         */
        $("html,body").on("keyup","input",function(){
            var $target = $(this);
            var value = $target.val();
            var lastV = value.substring(value.length-1,value.length);
            var pattern = /[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%&*（）\-+={}|《》？：“”【】、；‘’，。、]/im;
            var pattern1 = /[……——]/im;
            if(pattern.test(lastV)){
                $target.val(value.slice(0,value.length-1));
            }
            if(pattern1.test(lastV)){
                $target.val(value.slice(0,value.length-2));
            }
        });
        /**
         * 屏蔽输入框空格输入
         */
        $("html,body").on("keypress","input",function(event){
            if(event.keyCode == 32){
                return false
            }
            // 如何采用下面这种做法在IE9，10，,11下会导致无法输入中文
            // $(this).val($(this).val().replace(/\s+/g,""));
        })
    })
</script>
</body>
</html>
